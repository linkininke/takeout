<!--pages/cart/cart.wxml-->
<view class="cart-container">
  <!-- 购物车为空 -->
  <view class="empty-cart" wx:if="{{cartItems.length === 0}}">
    <text class="empty-icon">🛒</text>
    <text class="empty-text">购物车为空</text>
    <navigator url="/pages/shop/shop" class="go-shopping-btn">
      <text>去购物</text>
    </navigator>
  </view>

  <!-- 购物车列表 -->
  <scroll-view scroll-y class="cart-list" wx:else>
    <view class="cart-item" wx:for="{{cartItems}}" wx:key="id">
      <image class="dish-image" src="{{item.image || '/images/default-dish.png'}}" mode="aspectFill"></image>
      <view class="dish-info">
        <text class="dish-name">{{item.name}}</text>
        <text class="dish-price">¥{{item.price}}</text>
      </view>
      <view class="quantity-control">
        <view class="control-btn reduce" bindtap="decreaseQuantity" data-id="{{item.id}}">
          <text>-</text>
        </view>
        <text class="quantity">{{item.quantity}}</text>
        <view class="control-btn increase" bindtap="increaseQuantity" data-id="{{item.id}}">
          <text>+</text>
        </view>
      </view>
      <view class="delete-btn" bindtap="deleteItem" data-id="{{item.id}}">
        <text>🗑️</text>
      </view>
    </view>
  </scroll-view>

  <!-- 底部结算栏 -->
  <view class="cart-footer" wx:if="{{cartItems.length > 0}}">
    <view class="footer-left">
      <view class="clear-cart" bindtap="clearCart">
        <text>清空购物车</text>
      </view>
      <view class="total-info">
        <text class="total-text">合计：</text>
        <text class="total-price">¥{{totalPrice.toFixed(2)}}</text>
        <text class="total-count">({{totalCount}}件)</text>
      </view>
    </view>
    <view class="submit-btn" bindtap="submitOrder">
      <text>提交订单</text>
    </view>
  </view>
</view>
