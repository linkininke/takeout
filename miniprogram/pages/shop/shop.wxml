<!--pages/shop/shop.wxml-->
<view class="shop-container">
  <!-- 搜索栏 -->
  <view class="search-bar">
    <input 
      type="text" 
      placeholder="搜索店铺名称" 
      class="search-input" 
      value="{{keyword}}"
      bindinput="onKeywordInput"
      bindconfirm="onSearch"
    />
    <view class="search-icon" bindtap="onSearch">
      <text>搜索</text>
    </view>
  </view>
  
  <!-- 分类导航 -->
  <scroll-view scroll-x class="category-scroll">
    <view 
      class="category-item {{currentCategory === item.id ? 'active' : ''}}" 
      wx:for="{{categories}}" 
      wx:key="id" 
      data-id="{{item.id}}" 
      bindtap="switchCategory"
    >
      <text>{{item.name}}</text>
    </view>
  </scroll-view>

  <!-- 店铺列表 -->
  <scroll-view scroll-y class="shop-list" bindscrolltolower="onReachBottom">
    <view 
      class="shop-item" 
      wx:for="{{shops}}" 
      wx:key="id" 
      data-id="{{item.id}}" 
      bindtap="navigateToShopDetail"
    >
      <image class="shop-logo" src="{{item.logo || '/images/default-shop.png'}}" mode="aspectFill"></image>
      <view class="shop-info">
        <view class="shop-header">
          <text class="shop-name">{{item.name}}</text>
          <text class="shop-rating">⭐{{item.rating}}</text>
        </view>
        <text class="shop-description">{{item.description}}</text>
        <view class="shop-footer">
          <text class="shop-distance">{{item.distance}}km</text>
          <text class="shop-delivery">配送费{{item.deliveryFee}}元起</text>
        </view>
      </view>
    </view>

    <!-- 加载更多 -->
    <view class="loading" wx:if="{{loading}}">
      <text>加载中...</text>
    </view>
    <view class="no-more" wx:if="{{!hasMore && shops.length > 0}}">
      <text>没有更多了</text>
    </view>
    <view class="empty" wx:if="{{!loading && shops.length === 0}}">
      <text>暂无店铺</text>
    </view>
  </scroll-view>
</view>
