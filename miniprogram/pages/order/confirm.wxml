<!--pages/order/confirm.wxml-->
<view class="order-confirm-container">
  <!-- 订单信息 -->
  <view class="section" wx:if="{{orderInfo}}">
    <view class="section-header">
      <text class="section-title">订单信息</text>
    </view>
    <view class="order-info">
      <view class="order-item">
        <text class="label">订单编号：</text>
        <text class="value">{{orderInfo.orderNumber}}</text>
      </view>
      <view class="order-item">
        <text class="label">下单时间：</text>
        <text class="value">{{orderInfo.createTime}}</text>
      </view>
      <view class="order-item">
        <text class="label">订单金额：</text>
        <text class="value price">¥{{orderInfo.totalAmount}}</text>
      </view>
    </view>
  </view>

  <!-- 收货地址 -->
  <view class="section">
    <view class="section-header">
      <text class="section-title">收货地址</text>
    </view>
    <scroll-view scroll-y class="address-list" wx:if="{{addressList.length > 0}}">
      <view 
        class="address-item {{selectedAddress.id === item.id ? 'selected' : ''}}" 
        wx:for="{{addressList}}" 
        wx:key="id" 
        data-id="{{item.id}}" 
        bindtap="selectAddress"
      >
        <view class="address-header">
          <text class="consignee">{{item.consignee}}</text>
          <text class="phone">{{item.phone}}</text>
        </view>
        <text class="address-detail">{{item.province}}{{item.city}}{{item.district}}{{item.detail}}</text>
      </view>
    </scroll-view>
    <view class="no-address" wx:else>
      <text>暂无收货地址，请添加</text>
    </view>
  </view>

  <!-- 商品清单 -->
  <view class="section" wx:if="{{orderInfo && orderInfo.orderItems}}">
    <view class="section-header">
      <text class="section-title">商品清单</text>
    </view>
    <view class="order-items">
      <view class="order-item" wx:for="{{orderInfo.orderItems}}" wx:key="id">
        <text class="item-name">{{item.name}} x{{item.quantity}}</text>
        <text class="item-price">¥{{item.price * item.quantity}}</text>
      </view>
    </view>
  </view>

  <!-- 底部支付按钮 -->
  <view class="pay-footer" wx:if="{{orderInfo}}">
    <view class="total-amount">
      <text class="label">实付金额：</text>
      <text class="price">¥{{orderInfo.totalAmount}}</text>
    </view>
    <view class="pay-btn" bindtap="payOrder">
      <text>立即支付</text>
    </view>
  </view>
</view>
